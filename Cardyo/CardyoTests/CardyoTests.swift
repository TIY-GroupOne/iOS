//
//  CardyoTests.swift
//  CardyoTests
//
//  Created by Mac Bellingrath on 11/4/15.
//  Copyright Â© 2015 TeamOne. All rights reserved.
//

import XCTest
@testable import Cardyo

//#REGISTRATION CONTROLLER
//post "/signup", to: "registrations#create"
//delete "/signup", to: "registrations#destroy"
//post "/login", to: "registrations#login"
//get "/logout", to: "registrations#logout"
//
//#USER CONTROLLERS
//get "/users", to: "users#index"
//get "/users/:id", to: "users#info" , as: "user"
//post "/users/new", to: "users#new"
//get "/users/:id/profile", to: "users#profile", as: "profile"
//
//#DECK AND CARD ROUTES
//get "/index" , to: "deck#index"
//get "/decks/:id/cards" , to: "deck#retrieve", as: "deck"
//get "/decks/cards/:id", to: "card#show", as: "card"
//post "/decks" , to: "deck#create"
//post "/decks/:id/cards" , to: "card#create"
//delete "/decks/:id" , to: "deck#delete"
//delete "/decks/cards/:id" , to: "card#delete"
//put "/decks/cards/:id", to: "card#editcard"
//
//#GUESS CONTROLLER
//get "/answers", to: "guess#retrieve"
//post "/answers", to: "guess#record"
////


class CardyoTests: XCTestCase {
    
    func testSignup(){
        
    }
    
       
  
    
    func testRailsRegistration() {
        
        self.measureBlock { () -> Void in
            
        
        
        let expect = self.expectationWithDescription("expect registration response")
        
        RailsRequest.session().register(withUserName: "Crufty", andPassword: "secrets", andEmail: "crufty@icloud.com") { (success) -> () in
//            XCTAssertTrue(success)
            XCTAssertNotNil(RailsRequest.session().token, "token is nil")
            expect.fulfill()
            
        }
        self.waitForExpectationsWithTimeout(20) { (error) -> Void in
            print(error)
        }
    
        
        
        }
        
    }
    
    
    func testCreateDeck() {
        
        self.measureBlock { () -> Void in
       
            let expectation = self.expectationWithDescription("Expect deck is created")
            
            RailsRequest.session().getDeckWithCompletion(withDeckTitle: "Test", completion: { () -> () in
                
                expectation.fulfill()
                
            })
            self.waitForExpectationsWithTimeout(10, handler: { (error) -> Void in
                print(error)
            })
            
            
        }
    }
    
//    func testRailsLogIn() {
//        
//        RailsRequest.session().loginWithUsername("mac", andPassword: "password")
//        
//        let token = RailsRequest.session().token
//        XCTAssertNotNil(token, "token is nil")
//    }
    
}
